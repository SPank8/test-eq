{"name": "Сравнение HTML-ответов с двух серверов", "status": "failed", "statusDetails": {"message": "AssertionError: HTML ответы отличаются!\nassert '<!doctype ht.../body></html>' == '<!DOCTYPE ht...y>\\n</html>\\n'\n  + <!doctype html><html lang=\"ru\" class=\"Theme Theme_color_morda-default Theme_root_morda-desktop document_neuro-redesign_yes document_headline-services_yes document_informers_redesign_yes document_services-suggest_yes document_services-suggest_new-icons document_extra-content_yes document_overflow-scroll_yes i-ua_js_no i-ua_inlinesvg_yes\"><head xmlns:og=\"http://ogp.me/ns#\"><meta charSet=\"UTF-8\"/><title>Яндекс — быстрый поиск в интернете</title><link rel=\"apple-touch-icon\" href=\"https://yastatic.net/s3/home-static/_/nova/CZdA_knb.png\" sizes=\"76x76\"/><link rel=\"apple-touc...\n  \n  ...Full output truncated (51 lines hidden), use '-vv' to show", "trace": "@allure.title(\"Сравнение HTML-ответов с двух серверов\")\n    @allure.description(\"Проверяем, что страницы REF и TARGET возвращают одинаковый HTML и статус код 200.\")\n    \n    def test_compare_html_responses():\n        url_ref = \"http://ya.ru\"\n    \n        url_target = \"http://webtours.load-test.ru:1090/cgi-bin/nav.pl?in=home\"\n    \n        with allure.step(f\"GET запрос к REF: {url_ref}\"):\n            ref = requests.get(url_ref)\n            allure.attach(ref.text, name=\"REF Response (полный)\", attachment_type=allure.attachment_type.TEXT)\n            assert ref.status_code == 200, f\"REF вернул {ref.status_code}\"\n    \n        with allure.step(f\"GET запрос к TARGET: {url_target}\"):\n            target = requests.get(url_target)\n            allure.attach(target.text, name=\"TARGET Response (полный)\", attachment_type=allure.attachment_type.TEXT)\n            assert target.status_code == 200, f\"TARGET вернул {target.status_code}\"\n    \n        with allure.step(\"Сравнение HTML содержимого\"):\n            if ref.text != target.text:\n                allure.attach(ref.text, name=\"REF (diff)\", attachment_type=allure.attachment_type.TEXT)\n                allure.attach(target.text, name=\"TARGET (diff)\", attachment_type=allure.attachment_type.TEXT)\n>           assert ref.text == target.text, \"HTML ответы отличаются!\"\nE           AssertionError: HTML ответы отличаются!\nE           assert '<!doctype ht.../body></html>' == '<!DOCTYPE ht...y>\\n</html>\\n'\nE             + <!doctype html><html lang=\"ru\" class=\"Theme Theme_color_morda-default Theme_root_morda-desktop document_neuro-redesign_yes document_headline-services_yes document_informers_redesign_yes document_services-suggest_yes document_services-suggest_new-icons document_extra-content_yes document_overflow-scroll_yes i-ua_js_no i-ua_inlinesvg_yes\"><head xmlns:og=\"http://ogp.me/ns#\"><meta charSet=\"UTF-8\"/><title>Яндекс — быстрый поиск в интернете</title><link rel=\"apple-touch-icon\" href=\"https://yastatic.net/s3/home-static/_/nova/CZdA_knb.png\" sizes=\"76x76\"/><link rel=\"apple-touc...\nE             \nE             ...Full output truncated (51 lines hidden), use '-vv' to show\n\ntests\\test_compare.py:26: AssertionError"}, "description": "Проверяем, что страницы REF и TARGET возвращают одинаковый HTML и статус код 200.", "steps": [{"name": "GET запрос к REF: http://ya.ru", "status": "passed", "attachments": [{"name": "REF Response (полный)", "source": "152ea76e-bc0c-4694-bbea-9ccd85148d13-attachment.txt", "type": "text/plain"}], "start": 1744725304939, "stop": 1744725305682}, {"name": "GET запрос к TARGET: http://webtours.load-test.ru:1090/cgi-bin/nav.pl?in=home", "status": "passed", "attachments": [{"name": "TARGET Response (полный)", "source": "3ff58838-dd8e-4c76-86fd-d6818a6536c2-attachment.txt", "type": "text/plain"}], "start": 1744725305682, "stop": 1744725305889}, {"name": "Сравнение HTML содержимого", "status": "failed", "statusDetails": {"message": "AssertionError: HTML ответы отличаются!\nassert '<!doctype ht.../body></html>' == '<!DOCTYPE ht...y>\\n</html>\\n'\n  + <!doctype html><html lang=\"ru\" class=\"Theme Theme_color_morda-default Theme_root_morda-desktop document_neuro-redesign_yes document_headline-services_yes document_informers_redesign_yes document_services-suggest_yes document_services-suggest_new-icons document_extra-content_yes document_overflow-scroll_yes i-ua_js_no i-ua_inlinesvg_yes\"><head xmlns:og=\"http://ogp.me/ns#\"><meta charSet=\"UTF-8\"/><title>Яндекс — быстрый поиск в интернете</title><link rel=\"apple-touch-icon\" href=\"https://yastatic.net/s3/home-static/_/nova/CZdA_knb.png\" sizes=\"76x76\"/><link rel=\"apple-touc...\n  \n  ...Full output truncated (51 lines hidden), use '-vv' to show\n", "trace": "  File \"D:\\Github\\eq\\test-eq\\tests\\test_compare.py\", line 26, in test_compare_html_responses\n    assert ref.text == target.text, \"HTML ответы отличаются!\"\n    \n"}, "attachments": [{"name": "REF (diff)", "source": "e9dd60e5-166d-4786-9872-0236f389b736-attachment.txt", "type": "text/plain"}, {"name": "TARGET (diff)", "source": "a636c628-cf67-412a-a642-999358b297e2-attachment.txt", "type": "text/plain"}], "start": 1744725305889, "stop": 1744725305954}], "start": 1744725304939, "stop": 1744725305955, "uuid": "d2556d70-73c2-4abc-a566-4799b5e4070f", "historyId": "1f8d9c9a3f4d396bf269db341df8204b", "testCaseId": "1f8d9c9a3f4d396bf269db341df8204b", "fullName": "tests.test_compare#test_compare_html_responses", "labels": [{"name": "parentSuite", "value": "tests"}, {"name": "suite", "value": "test_compare"}, {"name": "host", "value": "DESKTOP-7H4UQS5"}, {"name": "thread", "value": "23392-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.test_compare"}]}